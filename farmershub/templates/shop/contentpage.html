{% extends 'shop/base.html' %}
{% load static %}
{% block content %}
<style>
  .cartbtn{
    background-color: #7fb825;
    color: white;
    text-decoration: none;
    padding: 8px;
    border-radius: 20px;
    border: 1px solid white;
    margin-left: 10px;
  }
  .cartbtn:hover{
    background-color: white;
    color: #7fb825;
    border: 1px solid  #7fb825;
  }
  .xmd{
    min-height: 80vh;
    justify-content: center;
    display: flex;
    align-items: center;
  }
 
</style>

<!-- content -->

<section class="py-5 xmd">

  <div class="container">

    <div class="row gx-5">
      <aside class="col-lg-6">
        <div class=" mb-3 d-flex justify-content-center">
         
            <img style="width: 100%; height: 50vh; margin: auto;" class="rounded-4 fit" src="/shop/{{blog.image}}" />
        </div>
      
        <!-- thumbs-wrap.// -->
        <!-- gallery-wrap .end// -->
      </aside>
      <main class="col-lg-6">
        <div class="ps-lg-3">
         
       
<h1 style="font-size: 80px;">{{blog.name}}</h1>
          <div class="mb-3">
            <span class="h2" style="text-decoration:line-through; color: red;">${{blog.Oldprice}}</span>

            <span class="h2">${{blog.Currentprice}}</span>

            <span class="text-muted">/per kg</span>
            <!-- <h4>REAL PRICE:<span class="real">${{blog.Oldprice}}</span><span class="disc"></span></h4> -->

          </div>

          <p>
           {{blog.description}}
          </p>
         
<!-- 
          <div class="row">
            <dt class="col-3">Type:</dt>
            <dd class="col-9">Regular</dd>

            <dt class="col-3">Color</dt>
            <dd class="col-9">Brown</dd>

            <dt class="col-3">Material</dt>
            <dd class="col-9">Cotton, Jeans</dd>

            <dt class="col-3">Brand</dt>
            <dd class="col-9">Reebook</dd>
          </div> -->

          <hr />
          {% if user.is_authenticated and user.is_superuser %}

          {% elif user.is_authenticated %}
          <div class="quantity">
            <span>Quantity</span>
            <input type="number" min="1" max="1000" value="1" id="quantity"  style="border-radius: 20px; padding: 20px; height: 33px;"/>
            <span>Kg</span>
          </div>
          <br><br>
          <a class="cartbtn" onclick="addToCart('{{blog.id}}','{{blog.Currentprice}}','{{blog}}')" href="{% url 'cart' %}"><i class="fa-solid fa-cart-shopping"></i>Add to cart</a>
          {% else %}
          <!-- <div class="alert alert-primary" role="alert">
            <p style="color: rgb(255, 49, 49);" id="loginMessage">{{ login_error_message }}</p>          </div> -->
            <div id="liveAlertPlaceholder"></div>          

          <a class="cartbtn" id="liveAlertBtn" ><i class="fa-solid fa-cart-shopping"></i>Add to cart</a>

{% endif %}
        </div>
      </main>
    </div>
  </div>  
</section>
<!-- content -->
<script>

const alertPlaceholder = document.getElementById('liveAlertPlaceholder');

// Function to append alert to the global placeholder
const appendAlert = (message, type) => {
  const wrapper = document.createElement('div');
  wrapper.innerHTML = [
    `<div class="alert alert-${type} alert-dismissible" role="alert">`,
    `   <div>${message}</div>`,
    '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
    '</div>'
  ].join('');

  // Set styles for the alertPlaceholder
  alertPlaceholder.style.backgroundColor = 'red';
  alertPlaceholder.style.color = 'white';

  alertPlaceholder.innerHTML = ''; // Clear existing content
  alertPlaceholder.append(wrapper);
}

// Button click event listener
const alertTrigger = document.getElementById('liveAlertBtn');
if (alertTrigger) {
  alertTrigger.addEventListener('click', () => {
    appendAlert('you need to login!', 'success');
  });
}

</script>

<script src="{% static 'js/shop2.js' %}"></script>

{% include "home/base.html" %}

{% endblock content %}